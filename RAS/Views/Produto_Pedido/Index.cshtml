@model List<Produto>

<br />
@if (@Model == null)
{
    <h3>@ViewBag.Mensagem</h3>
}
else
{
    <table class="table table-hover">
        <tr>
            <th>Id</th>
            <th>Tipo</th>
            <th>Descrição</th>
            <th>Estoque</th>
            <th>Preço</th>
            <th>Quantidade</th>
        </tr>
        @foreach (var p in Model)
        {
            <tr>
                <td>@p.Produtos_id</td>
                <td>@p.Tipo</td>
                <td>@p.Descricao</td>
                <td>@p.Estoque</td>
                <td>@p.Valor</td>
                <td>
                    <select style="margin-right: 68%; background-color: #white;" id="quantidade@(p.Produtos_id)">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </td>
                <td>
                    <a id="comprar" class="btn btn-sm btn-primary" style="background-color: green;"
                href="/carrinho/comprar/@p.Produtos_id" hidden>Comprar</a>
                    <button onclick="comprar('/carrinho/comprar/@p.Produtos_id', '@(p.Produtos_id)')"
                class="btn btn-sm btn-primary">Comprar</button>
                </td>

            </tr>
        }
    </table>
}

<script>
    function comprar(href, id) {
        var quantidade = parseInt(document.getElementById('quantidade' + id).value);
        document.getElementById('comprar').href = href + `/${quantidade}`;
        document.getElementById('comprar').click();
        document.getElementById('comprar').href = href;

    }
</script>